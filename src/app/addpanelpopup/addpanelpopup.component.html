<div class="site-wrap">
  <nav class="site-nav">
    <div class="name">Metrics</div>
    <ul>
      <li>
      <a  (click)="showInfraSubMenu()" [ngClass]="{'activesub': true}" *ngIf="deployment=='K8s Cluster'">K8s Cluster Infrastructure Ressources</a>

        <ul class="sub-menu" *ngIf="isInfraSubMenuOpen" >
          <a  (click)="showClusterSubMenu()" [ngClass]="{'active': isInfraSubMenuOpen}">Cluster Health</a>
          <div *ngIf="isClusterHealth">

          <li><a (click)="showChartMenu();getSelectedMetric('clusterpodusage','Pod Usage')" > Pod Usage</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('clustercpuusage','CPU Usage')" > CPU Usage</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('clustermemoryusage','Memory Usage')" >Memory Usage</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('clusterdiskusage','Disk Usage')" >Disk Usage</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('clusterpodcapacity','Pod Capacity')" > Pod Capacity</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('clustercpucapacity','CPU Capacity')" > CPU Capacity</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('clustermemorycapacity','Memory Capacity')" > Memory Capacity</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('clusterdiskcapacity','Disk Capacity')" > Disk Capacity</a></li>
          </div>
        </ul>

           <ul class="sub-menu" *ngIf="isInfraSubMenuOpen" >
          <a  (click)="showDeploymentSubMenu()" [ngClass]="{'active': isInfraSubMenuOpen}">Deployments</a>
          <div *ngIf="isDeployment">

          <li><a (click)="showChartMenu();getSelectedMetric('replicauptodate','Replicas Up to date')" > Replicas Up to date</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('replica','Replicas')" > Replicas</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('replicaupdated','Replicas Updated')" >Replicas Updated</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('replicaunavailable','Replicas Unavailable')" >Replicas Unavailable</a></li>
          </div>
        </ul>

        <ul class="sub-menu" *ngIf="isInfraSubMenuOpen" >
          <a  (click)="showNodeSubMenu()" [ngClass]="{'active': isInfraSubMenuOpen}">Node</a>
          <div *ngIf="isNode">

          <li><a (click)="showChartMenu();getSelectedMetric('nbnodes','Number of nodes')" > Number of nodes</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('nodesoutofdisk','Nodes out of Disk')" > Nodes out of Disk</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('nodesunavailable','Nodes Unavailable')" > Nodes Unavailable</a></li>
          </div>
        </ul>
        <ul class="sub-menu" *ngIf="isInfraSubMenuOpen" >
          <a  (click)="showPodSubMenu()" [ngClass]="{'active': isInfraSubMenuOpen}">Pods</a>
          <div *ngIf="isPods">

          <li><a (click)="showChartMenu();getSelectedMetric('podsrunning','Pods Running')" > Pods Running</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('podspending','Pods Pending')" > Pods Pending</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('podsfailed','Pods Failed')" > Pods Failed</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('podsuccess','Pods Succeeded')" > Pods Succeeded</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('podsunkown','Pods Unknown')" > Pods Unknown </a></li>
          </div>
        </ul>
        <ul class="sub-menu" *ngIf="isInfraSubMenuOpen" >
          <a  (click)="showContainersSubMenu()" [ngClass]="{'active': isInfraSubMenuOpen}">Containers</a>
          <div *ngIf="isContainer">
          <li><a (click)="showChartMenu();getSelectedMetric('containerrun','Containers Running')" > Containers Running</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('containerwait','Containers Waiting')" > Containers Waiting</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('containerrestart','Containers Restarted in the Last 30 mn')" > Containers Restarted in the Last 30 mn</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('containertermn','Containers Terminated')" > Containers Terminated</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('containercpu','CPU cores requested By Containers')" > CPU cores requested By Containers </a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('containermemo','Memory requested By Containers')" > Memory requested By Containers </a></li>
        </div>

        </ul>
        <ul class="sub-menu" *ngIf="isInfraSubMenuOpen" >
          <a  (click)="showJobsSubMenu()" [ngClass]="{'active': isInfraSubMenuOpen}" >Jobs</a>
          <div *ngIf="isJobs">
            <li><a (click)="showChartMenu();getSelectedMetric('jobsuccess','Jobs Succeeded')" > Jobs Succeeded </a></li>
            <li><a (click)="showChartMenu();getSelectedMetric('jobsfailed','Jobs Failed')" > Jobs Failed</a></li>

          </div>
        </ul>
      </li>
      <br>
      <li >
        <a (click)="showDBSubMenu()" [ngClass]="{'activesub': true}" *ngIf="deployment=='VM'">VM Infrastructure Ressources</a>
        <ul class="sub-menu" *ngIf="isDBSubMenuOpen">
          <li><a (click)="showChartMenu();getSelectedMetric('cachesize','Cache Size')">Cache Size</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('hikaricpconnectionstimeout','Hikaricp Connections Timeout Total')">Hikaricp Connections Timeout Total</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('jdbcconnectionsactive','Jdbc Connections Active')">Jdbc Connections Active </a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('processfilesopenfiles','Process Files OpenFiles')">Process Files OpenFiles</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('hikaricpconnections','Hikaricp Connections')">Hikaricp Connections</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('vmmemototalused','VM Memory Total Used Window in 1h')">VM Memory Total Used Window in 1h</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('vmcpuload','VM Cpu Load X100 Window in 1h')">VM Cpu Load X100 Window in 1h</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('vmmemopoolsmetaspace','VM Memory Pools Metaspace Used Window in 1h')">VM Memory Pools Metaspace Used Window in 1h</a></li>


        </ul>
        <br>
    </li>

     <li >
          <a (click)="showAppSubMenu()" [ngClass]="{'activesub': true}" >Application Ressources</a>
          <ul class="sub-menu" *ngIf="isAppSubMenuOpen">
                  <li><a  (click)="showChartMenu();getSelectedMetric('httprequests','HTTP requests')">HTTP requests</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('errorrates','Error rates')">Error rates</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('starttime','Start time')">Start time</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('uptime','Up time')">Up time</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('status','Instance Status')">Instance Status</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('healthcheck','Health Check')">Health Check</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('buildstatus','Build Status')">Build Status</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('builderrors','Build Errors')">Build Errors</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('buildtime','Build Time')">Build Time</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('coverage','Code Coverage')">Code Coverage</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('dup','Code Duplication')">Code Duplication</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('vun','Security Vunerabilites')">Security Vunerabilites</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('bugs','Bugs')">Bugs</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('junit','Junit Tests')">Junit Tests</a></li>     
                  <li><a (click)="showChartMenu();getSelectedMetric('smells','Code Smells')">Code Smells</a></li>
                  <li><a (click)="showChartMenu();getSelectedMetric('bugs','Bugs')">Bugs</a></li>



          </ul>
      </li>
      <br>


      <li >
          <a (click)="showDBSubMenu()" [ngClass]="{'activesub': true}">DataBase Ressources</a>
          <ul class="sub-menu" *ngIf="isDBSubMenuOpen">
            <li><a (click)="showChartMenu();getSelectedMetric('jdbcactive','JDBC Active connections')">JDBC Active connections</a></li>
            <li><a (click)="showChartMenu();getSelectedMetric('jdbcidle','JDBC IDLE connections')">JDBC IDLE connections</a></li>
            <li><a (click)="showChartMenu();getSelectedMetric('jdbcmin','JDBC Min connections')">JDBC Min connections</a></li>
            <li><a (click)="showChartMenu();getSelectedMetric('jdbcmax','JDBC Max connections')">JDBC Max connections</a></li>


          </ul>
      </li>
      <br>

      <li >
          <a (click)="showServerSubMenu()" [ngClass]="{'activesub': true}">Server and Network Health</a>
          <ul class="sub-menu" *ngIf="isServerSubMenuOpen">
            <li><a (click)="showChartMenu();getSelectedMetric('httpavg','HTTP Server AVG Requests')">HTTP Server AVG Requests</a></li>
            <li><a (click)="showChartMenu();getSelectedMetric('diskspace','Disk Space')">Disk Space</a></li>
            <li><a (click)="showChartMenu();getSelectedMetric('topcpuusage','TOP CPU Usage')">TOP CPU Usage</a></li>



          </ul>
      </li>
      <br>
      <li >
        <a (click)="showJVMSubMenu()" [ngClass]="{'activesub': true}">JVM Metrics</a>
        <ul class="sub-menu" *ngIf="isJVMSubMenuOpen">
          <li><a (click)="showChartMenu();getSelectedMetric('heapmemo','Heap memory usage')">Heap memory usage</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('nonheap','Non-heap memory usage')">Non-heap memory usage</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('jvmtotal','JVM Total')">JVM Total</a></li>
          <li><a (click)="showChartMenu();getSelectedMetric('cpujvm','CPU Usage')">CPU Usage</a></li>
        </ul>
    </li>
    
      

   
    </ul>

   

  </nav>


  <!-- l charts -->


  
  <main>

  <nav class="site-nav2" *ngIf="chartMenu">
      <div class="name">Charts</div>

      <ul>
        <li>
          <div draggable="true" class="box" (dragstart)="onDragStart($event)">

              <h2 >Bar Chart</h2>
              <ngx-charts-bar-vertical 
              
              [view]="[200,200]"
              [results]="saleData"
              [showXAxisLabel]="true"
              [showYAxisLabel]="true"
              [xAxis]="true"
              [yAxis]="true"
              [gradient]="true">
              </ngx-charts-bar-vertical>      

          </div>
        </li>
  
  
          <li>
              <div draggable="true" class="box" (dragstart)="onDragStart($event)">
                  <h2>Line Chart</h2>

                  <ngx-charts-line-chart
                  [results]="lineData"
                  [legend]="true"
                  [view]="[200,200]"
                  >
        
                  </ngx-charts-line-chart>
              </div>   

          </li>
          <li title="Gauge">
              <div draggable="true" class="box" (dragstart)="onDragStart($event)">
                  <h2>Gauge Chart</h2>

              <ngx-charts-gauge
              [results]="saleData"
              [legend]="false"
              [view]="[300,200]" 
              >
                
              </ngx-charts-gauge>
              </div>
          </li>
         
          <li>
              <div draggable="true" class="box" (dragstart)="onDragStart($event)">
                  <h2>Horizontal Chart</h2>

              <ngx-charts-bar-horizontal-stacked
              [results]="horizdata"
              [view]="[200,200]"
              [showXAxisLabel]="true"
              [showYAxisLabel]="true"
              [xAxis]="true"
              [yAxis]="true"
      
              ></ngx-charts-bar-horizontal-stacked>
              </div>
          </li>
          <li>
              <div draggable="true" class="box" (dragstart)="onDragStart($event)">
                  <h2>Stat Chart</h2>

              <ngx-charts-linear-gauge
              [view]="[200,200]"
              [value]="value"
              [previousValue]="previousValue"
              [units]="units">
            </ngx-charts-linear-gauge>
              </div>
          </li>
          <li>
              <div draggable="true" class="box" (dragstart)="onDragStart($event)">
                  <h2>XY Chart</h2>

              <ngx-charts-bubble-chart
              [results]="bubledata"
              [view]="[200,200]"
              [showYAxisLabel]="true"
              [yAxis]="true">
                
              </ngx-charts-bubble-chart>
              </div>
          </li>
          <li>
              <div draggable="true" class="box" (dragstart)="onDragStart($event)">
                  <h2>Pie Chart</h2>

              <ngx-charts-pie-chart 
              [results]="saleData"
              [legend]="false"
              [view]="[200,200]"
              >
          </ngx-charts-pie-chart>
              </div>
          </li>
     
      </ul>
  
     
  
    </nav>

    <header>
      

      <h1 class="title">Drag and Drop your Desired Metric And Chart</h1>


      <div class="subbtn">
        <button id="btn" (click)="nextMicroserviceBtn()" *ngIf="!showSaveButton && appType !== 'Monolithic app'">

          <p id="btnText">Next Microservice</p>
            <div class="check-box">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50">
                    <path fill="transparent" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                </svg>
            </div>
        </button>

        <button id="btn" (click)="submitBtn()" *ngIf="showSaveButton || appType == 'Monolithic app'">
            <p id="btnText">Save</p>
            <div class="check-box">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50">
                    <path fill="transparent" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                </svg>
            </div>
        </button>
      </div>

   

  
      <nav class="nav-tabs" id="nav-tabs" *ngIf="appType !== 'Monolithic app'">
        <a *ngFor="let service of items; let i=index"
           [ngClass]="{'activemic': i === parcoursms}"
           (click)="parcoursms = i;saveTheMicDash()">
           Microservice {{ i + 1 }}
        </a>
      </nav>


      
    </header>

    <div class="container_win_l_drop" (dragover)="onDragOver($event)" (drop)="onDrop($event)" draggable="false">
      <div class="content-columns" >
        <div class="col">
          <div draggable="true" class="dropbox" *ngFor="let column of columns"></div>
        </div>

      <div class="col">
        <div draggable="true" class="dropbox" *ngFor="let column of columns"></div>
      </div>
      
      <div class="col">
        <div draggable="true" class="dropbox" *ngFor="let column of columns"></div>
      
      </div>
    </div>
  </div>

  </main>

</div>


