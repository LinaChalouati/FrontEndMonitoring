
<body>
    <!-- SIDEBAR -->
    <section id="sidebar" [ngClass]="status ? 'hide' : ''">
      <a href="#" class="brand"></a>
      <ul class="side-menu top">
        <li >
          <a (click)="goDashboard()">
            <i class='bx bxs-dashboard'></i>
            <span class="text">Project OverView</span>
          </a>
        </li>
        <li [class.active]="selectedItem === 1" (click)="selectItem(1)">
          <a >
            <i class='bx bxs-bell'></i>
            <span class="text">Alerts</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class='bx bxs-shopping-bag-alt'></i>
            <span class="text">Logs</span>
          </a>
        </li>
        <li >
          <a href="#">
            <i class='bx bxs-doughnut-chart'></i>
            <span class="text">Help</span>
          </a>
        </li>
      </ul>
      <ul class="side-menu">
        <li>
          <a href="#">
            <i class='bx bxs-cog'></i>
            <span class="text">Settings</span>
          </a>
        </li>
        <li>
          <a href="#" class="logout">
            <i class='bx bxs-log-out-circle'></i>
            <span class="text">Logout</span>
          </a>
        </li>
      </ul>
    </section>
    <!-- SIDEBAR -->
    
    
    <!-- SIDEBAR -->
    
    <!-- CONTENT -->
    <section id="content">
    
      <!-- NAVBAR -->
      <nav>
        <i (click)="addToggle()" class='bx bx-menu' ></i>
        <form >
    
        </form>
    
        <i class="bx bxs-home custom-icon" (click)="goHome()"></i>
    
        <a  class="notification">
    
          <i class='bx bxs-bell' ></i>
          <span class="num">{{ nbAlerts }}</span>
        </a>
    
    
      </nav>
    
      <!-- NAVBAR -->
      <nav class="site-nav2" *ngIf="showRuleInfoMenu">
        <h2 >{{this.ruleName}}</h2>
        <br>
    
        <label class="inp">
          <input type="text" id="inp-rule-name" placeholder="&nbsp;" [(ngModel)]="ruleName" readonly="active">
          <span class="label">Rule name</span>
          <span class="focus-bg"></span>
        </label>
    
        <label class="inp">
          <input type="text" id="inp-rule-name" placeholder="&nbsp;" [(ngModel)]="instance" readonly="active" >
          <span class="label">Instance</span>
          <span class="focus-bg"></span>
        </label>
    
        <label class="inp">
          <input type="text" id="inp-description" placeholder="&nbsp;" [(ngModel)]="description" readonly="active">
          <span class="label">Description</span>
          <span class="focus-bg"></span>
        </label>
    
        <label class="inp">
          <input type="text" id="inp-summary" placeholder="&nbsp;" [(ngModel)]="summary" readonly="active">
          <span class="label">Summary</span>
          <span class="focus-bg"></span>
        </label>
    
        <label class="inp">
          <input type="text" id="inp-severity" placeholder="&nbsp;" [(ngModel)]="severity" readonly="active">
          <span class="label">Severity</span>
          <span class="focus-bg"></span>
        </label>
    
        <label class="inp">
          <input type="text" id="inp-time-range" placeholder="&nbsp;" [(ngModel)]="timeRange" readonly="active">
          <span class="label">Time range</span>
          <span class="focus-bg"></span>
        </label>
    
        <a class="btn-download3" (click)="openRuleInfo()">Exit</a>
    
      </nav>
      <br>
    
    
      <nav class="site-nav2" *ngIf="showRuleEditMenu">
        <h2>{{ruleName}}</h2>
        <br>
    
        <label class="inp">
          <input type="text" id="inp-description" placeholder="&nbsp;" [(ngModel)]="newdescription">
          <span class="label">Description</span>
          <span class="focus-bg"></span>
        </label>
    
        <label class="inp">
          <input type="text" id="inp-summary" placeholder="&nbsp;" [(ngModel)]="newsummary" >
          <span class="label">Summary</span>
          <span class="focus-bg"></span>
        </label>
    
        <label class="inp">
          <input type="text" id="inp-severity" placeholder="&nbsp;" [(ngModel)]="newseverity" >
          <span class="label">Severity</span>
          <span class="focus-bg"></span>
        </label>
    
        <label class="inp">
          <input type="text" id="inp-time-range" placeholder="&nbsp;" [(ngModel)]="newtimeRange" >
          <span class="label">Time range (s)</span>
          <span class="focus-bg"></span>
        </label>
    
        <a class="btn-download3" (click)="openRuleEditMenu()">Cancel</a>
    
        <a class="btn-download3" (click)="saveModifiedRule()">Save</a>
      </nav>
    
    
      <!-- SIDE BAR FOR ALERT MAILS -->
    
      <!-- ALERT EDIT SIDE MENU-->
    
      <!-- MAIN -->
      <!-- lena l faza taa l angle -->
      <main>
        <div class="head-title">
          <div class="left">
            <h1>{{projectName}}</h1>
            <ul class="breadcrumb">
              <li>
                <a href="#">Project</a>
              </li>
              <li><i class='bx bx-chevron-right' ></i></li>
              <li>
                <a>Alerting</a>
    
              <li><i class='bx bx-chevron-right' ></i></li>
              <li>
                <a class="active" >Rules</a>
    
              </li>
    
    
    
            </ul>
          </div>
    
    
        </div>
    
        <div class="alertbuttons">
          <a  class="btn-download3" (click)="goMailSettings()"  >
            <i class='bx bxs-message' ></i>
            <span class="text">Mail Settings</span>
    
          </a>
          <a  class="btn-download3" (click)="goMailSettings()"  >
            <span class="text">Check Alerts</span>
    
          </a>
          <a  class="btn-download3" (click)="openPopup()" >
            <span class="text">Set a New Alert</span>
    
          </a>
    
        </div>
    
    
    
        <ul class="box-info">
    
          <li>
            <i class='bx bxs-bell' ></i>
            <span class="text" >
              <h3>{{nbAlerts}}</h3>
              <p>Alerts in Total</p>
            </span>
          </li>
          <li>
            <i class='bx bxs-cctv' ></i>
            <span class="text">
              <h3>{{nbRules}}</h3>
              <p> Rules in Total
              </p>
            </span>
          </li>
        </ul>
    
    
    
        <section>
    
          <div class="ltable">
    
            <div class="lheader">
              <h3>Rules</h3>
              <!--  <input type="text" id="search" placeholder="Search...">-->
            </div>
    
    
            <table >
              <thead>
              <tr>
                <th class="msname">Microservice Name</th>
                <th class="instance">Instance</th>
                <th class="title">Name</th>
                <th class="summary">Query</th>
                <th class="status">Duration</th>
                <th class="status">State</th>
                <th class="action">Action</th>
              </tr>
              </thead>
              <tbody >
              <tr *ngFor="let rule of rulesArray">
    
                <td class="msname2"> Microservices Name</td>
    
                <td class="instance">{{ rule.instance }}</td>
                <td class="title">{{ rule.name }}</td>
                <td class="summary">{{ rule.query }}</td>
                <td class="status">{{ rule.duration }} (s)</td>
                <td >
                  <span class="rule-state" id="{{rule.state}}" >{{rule.state}}</span>
                </td>
    
                <td class="action">
                  <div class="lemenuaction">
                    <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
                      <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #menu="matMenu">
                      <button mat-menu-item (click)="openRuleEditMenu();showRuleInfo(rule)">
                        <mat-icon>edit</mat-icon>
                        <span>Edit</span>
                      </button>
                      <button mat-menu-item (click)="storeRuleToDlete(rule);openDialog()" >
                        <mat-icon>delete_forever</mat-icon>
                        <span>Delete</span>
                      </button>
                      <button mat-menu-item (click)="openRuleInfo();showRuleInfo(rule)">
                        <mat-icon>visibility</mat-icon>
                        <span>View</span>
                      </button>
                    </mat-menu>
                  </div>
                </td>
    
              </tr>
    
              </tbody>
    
            </table>
            <div class="dialog-container" *ngIf="showDialog" >
              <div class="dialog-content">
                <h2 class="dialog-title">Delete Confirmation</h2>
                <p>Are you sure you want to delete the Rule.</p>
                <div class="dialog-buttons">
                  <button mat-button (click)="deleteConfirmation()">Yes</button>
                  <button mat-button (click)="closeDialog()">No</button>
    
                </div>
              </div>
            </div>
            <br>
          </div>
          <br>
    
    
    
          <br>
    
          <div class="toast" id="toast-message"></div>
    
          <div class="toast3" id="toast-message3"></div>
    
          <div class="toast4" id="toast-message4"></div>
          <div class="toast2" id="toast-message2"></div>
          <div class="toast5" id="toast-message5"></div>
          <div class="toast6" id="toast-message6"></div>
    
    
        </section>
    
    
      </main>
    
      <!-- MAIN -->
    </section>
    <!-- CONTENT -->
    </body>
    
    